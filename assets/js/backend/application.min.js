class SveaCheckout{constructor(){this.statusButtonSelector="#sco-check-svea-status",this.checkStatusBtn=null,this.sendPaymentLinkSelector=".sco-send-payment-link",this.sendPaymentLinkBtn=null,this.closeServerViolationMessageSelector="#sco-server-violation-error-message",this.closeServerViolationMessageBtn=null,this.addEventListeners()}static setup(){return new SveaCheckout}addEventListeners(){this.checkStatusBtn=document.querySelector(this.statusButtonSelector),this.closeServerViolationMessageBtn=document.querySelector(this.closeServerViolationMessageSelector),this.sendPaymentLinkBtn=document.querySelector(this.sendPaymentLinkSelector),this.checkStatusBtn&&this.checkStatusBtn.addEventListener("click",this.fetchStatus.bind(this)),this.closeServerViolationMessageBtn&&this.closeServerViolationMessageBtn.addEventListener("click",this.closeServerViolationMessage.bind(this)),this.sendPaymentLinkBtn&&this.sendPaymentLinkBtn.addEventListener("click",this.sendPaymentLink.bind(this))}sendPaymentLink(e){confirm(wc_sco_params.i18n.confirm_send_payment_link)||e.preventDefault()}closeServerViolationMessage(e){if("BUTTON"===e.target.tagName){const e=new FormData;e.append("action","sco-dismiss-server-violation-message"),e.append("security",window.wc_sco_params.security);const t={method:"POST",body:e};fetch(window.ajaxurl,t)}}fetchStatus(e){e.preventDefault();const t=this.checkStatusBtn.innerHTML,s=this.checkStatusBtn.getAttribute("data-loading-text");this.checkStatusBtn.innerHTML=s,this.checkStatusBtn.setAttribute("disabled","disabled");const n={security:wc_sco_params.security,action:"sco-check-order-status",order_id:wc_sco_params.order_id},a=new URLSearchParams(n),i=window.ajaxurl+"?"+a.toString();fetch(i).then((e=>e.json())).then((e=>{alert(this.decodeHtml(e.data)),this.checkStatusBtn.innerHTML=t,this.checkStatusBtn.removeAttribute("disabled")}))}decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}}function sveaCheckoutDomReady(){SveaCheckout.setup()}"complete"===document.readyState||"interactive"===document.readyState?sveaCheckoutDomReady():document.addEventListener("DOMContentLoaded",sveaCheckoutDomReady);